## Java高并发项目 学习笔记

### 项目开发技术 
前端：Bootstrap + jQuery + Thymeleaf

后端：SpringBoot + MyBatis + MySQL

中间件技术 : Druid + Redis + RabbitMQ 

### v1 -- 初始项目搭建

业务模块组成：登陆、注册 + 秒杀商品列表页 + 秒杀商品详情页 + 订单详情页

Jmeter压测分析，并发的瓶颈在数据库

初始压测数据：

| 服务        | 并发数    |  QPS  |  
| --------:   | -----:   | :----: | 
| 获取商品列表 | 1000      |   206  | 
| 获取商品详情 | 1000      |   243  | 

### v2 -- 对页面进行优化

1、使用Redis做MySQL的缓存，减少对数据库的访问

页面缓存 + URL缓存 + 对象缓存

##### 页面级缓存思路

首先从Redis中取页面缓存，如果取不到则进行手动渲染，将缓存set进Redis。最后返回页面缓存

压测数据: 

| 服务        | 并发数     |  优化后QPS  |
| --------   | -----:    | :----: |
| 获取商品列表 | 1000        | 429
| 获取商品详情 | 1000       | 672


还可以将缓存的细粒度划分得更细，将一些对象缓存到Redis   (不过对象发生更新时要记得同时更新缓存中的数据)

2、页面静态化，前后端分离

| 服务        | 并发数      |  优化后QPS  |
| --------   | -----:    | :----: |
| 获取商品详情 | 1000       | 373



3、静态资源优化

4、CDN优化
